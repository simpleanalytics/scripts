{"version":3,"file":"light.source.js","sources":["light.source.js"],"sourcesContent":["/* eslint-env browser */\n\n(function (\n  window,\n  overwriteOptions,\n  baseUrl,\n  apiUrlPrefix,\n  version,\n  defaultNamespace,\n  sendError,\n  warn\n) {\n  try {\n    /////////////////////\n    // PREDEFINED VARIABLES FOR BETTER MINIFICATION\n    //\n\n    // This seems like a lot of repetition, but it makes our script available for\n    // multple destination which prevents us to need multiple scripts. The minified\n    // version stays small.\n    var undefinedVar = undefined;\n    var trueVar = true;\n    var falseVar = false;\n    var trueText = \"true\";\n    var https = \"https:\";\n    var pageviewText = \"pageview\";\n    var eventText = \"event\";\n    var slash = \"/\";\n    var protocol = https + \"//\";\n    var con = window.console;\n    var doNotTrack = \"doNotTrack\";\n    var nav = window.navigator;\n    var loc = window.location;\n    var locationHostname = loc.host;\n    var doc = window.document;\n    var userAgent = nav.userAgent;\n    var notSending = \"Not sending request \";\n    var notSendingWhen = notSending + \"when \";\n    var fetchedHighEntropyValues = falseVar;\n    var encodeURIComponentFunc = encodeURIComponent;\n    var decodeURIComponentFunc = decodeURIComponent;\n    var stringify = JSON.stringify;\n    var thousand = 1000;\n    var addEventListenerFunc = window.addEventListener;\n    var fullApiUrl = protocol + apiUrlPrefix + baseUrl;\n    var documentElement = doc.documentElement || {};\n    var language = \"language\";\n    var Height = \"Height\";\n    var Width = \"Width\";\n    var scroll = \"scroll\";\n    var uaData = nav.userAgentData;\n    var scrollHeight = scroll + Height;\n    var offsetHeight = \"offset\" + Height;\n    var clientHeight = \"client\" + Height;\n    var clientWidth = \"client\" + Width;\n    var pagehide = \"pagehide\";\n    var platformText = \"platform\";\n    var platformVersionText = \"platformVersion\";\n    var docsUrl = \"https://docs.simpleanalytics.com\";\n    var pages = 0;\n    var isBotAgent =\n      /(bot|spider|crawl)/i.test(userAgent) && !/(cubot)/i.test(userAgent);\n\n\n    // Find the script element where options can be set on\n    var scriptElement =\n      doc.currentScript || doc.querySelector('script[src*=\"' + baseUrl + '\"]');\n\n    /////////////////////\n    // HELPER FUNCTIONS\n    //\n\n    // A simple log function so the user knows why a request is not being send\n    warn = function () {\n      // 1. Convert args to a normal array\n      var args = [].slice.call(arguments);\n\n      // 2. Prepend log prefix\n      args.unshift(\"Simple Analytics:\");\n\n      // 3. Pass along arguments to console.warn\n      // Function.prototype.apply.call is needed for Internet Explorer\n      return Function.prototype.apply.call(con.warn, con, args);\n    };\n\n    var warnInFunction = function (name, error) {\n      warn(\"Error in your \" + name + \" function:\", error);\n    };\n\n    var hasProp = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n\n    var isString = function (string) {\n      return typeof string == \"string\";\n    };\n\n    var filterRegex = function (item) {\n      return item.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n    };\n\n    var attr = function (scriptElement, attribute) {\n      return scriptElement && scriptElement.getAttribute(\"data-\" + attribute);\n    };\n\n    var convertCommaSeparatedToArray = function (csv) {\n      return Array.isArray(csv)\n        ? csv\n        : isString(csv) && csv.length\n          ? csv.split(/, ?/)\n          : [];\n    };\n\n    var isObject = function (object) {\n      return object && object.constructor === Object;\n    };\n\n    var assign = function () {\n      var to = {};\n      var arg = arguments;\n      for (var index = 0; index < arg.length; index++) {\n        var nextSource = arg[index];\n        if (isObject(nextSource)) {\n          for (var nextKey in nextSource) {\n            if (hasProp(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    };\n\n    var settings = window.sa_settings;\n    var logSettings = settings || Object.keys(overwriteOptions).length;\n\n    // Merge overwriteOptions with sa_settings\n    overwriteOptions = assign(overwriteOptions, settings);\n\n    if (logSettings) warn(\"Settings\", overwriteOptions);\n\n\n    var collectMetricByString = function (metricAbbreviation) {\n      // eslint-disable-next-line no-unreachable\n      return true;\n    };\n\n    var now = Date.now;\n\n    var uuid = function () {\n      var cryptoObject = window.crypto || window.msCrypto;\n      var emptyUUID = [1e7] + -1e3 + -4e3 + -8e3 + -1e11;\n      var uuidRegex = /[018]/g;\n\n      try {\n        return emptyUUID.replace(uuidRegex, function (c) {\n          return (\n            c ^\n            (cryptoObject.getRandomValues(new Uint8Array(1))[0] &\n              (15 >> (c / 4)))\n          ).toString(16);\n        });\n      } catch (error) {\n        return emptyUUID.replace(uuidRegex, function (c) {\n          var r = (Math.random() * 16) | 0,\n            v = c < 2 ? r : (r & 0x3) | 0x8;\n          return v.toString(16);\n        });\n      }\n    };\n\n    var isFunction = function (func) {\n      return typeof func == \"function\";\n    };\n\n    // Define namespace for the library\n    var namespaceText = \"namespace\";\n    var namespace =\n      overwriteOptions[namespaceText] ||\n      attr(scriptElement, namespaceText) ||\n      defaultNamespace;\n\n\n    var isBoolean = function (value) {\n      return !!value === value;\n    };\n\n    // By default we allow source, medium in the URLs. With strictUtm enabled\n    // we only allow it with the utm_ prefix: utm_source, utm_medium, ...\n    var strictUtm =\n      overwriteOptions.strictUtm ||\n      attr(scriptElement, \"strict-utm\") == trueText;\n\n    var getQueryParams = function (ignoreSource, overwriteSearch) {\n      return (\n        (overwriteSearch || loc.search)\n          .slice(1)\n          .split(\"&\")\n          .filter(function (keyValue) {\n            var ignore = ignoreSource || !collectMetricByString(\"ut\");\n\n            if (ignore) return falseVar;\n            // eslint-disable-next-line no-redeclare\n            var regex =\n              \"^((utm_)\" +\n              (strictUtm ? \"\" : \"?\") +\n              \"(source|medium|content|term|campaign)\" +\n              (strictUtm ? \"\" : \"|ref\") +\n              \")=\";\n\n            // The prefix \"utm_\" is optional with \"strictUtm\" disabled\n            // \"ref\" is only collected when \"strictUtm\" is disabled\n            return new RegExp(regex).test(keyValue);\n          })\n          .join(\"&\") || undefinedVar\n      );\n    };\n\n\n    /////////////////////\n    // Warn when using script twice\n    //\n\n    // Only load our script once, customers can still send multiple page views\n    // with the sa_pageview function if they turn off auto collect.\n    var loadedVariable = namespace + \"_loaded\";\n    if (window[loadedVariable] == trueVar) return warn(notSending + \"twice\");\n    window.sa_event_loaded = trueVar;\n    window[loadedVariable] = trueVar;\n\n    /////////////////////\n    // SEND DATA VIA OUR PIXEL\n    //\n\n    // Send data via image\n    var sendData = function (data, callback, onlyThisData) {\n      data = onlyThisData ? data : assign(payload, page, data);\n\n      if (nav.brave && !onlyThisData) data.brave = trueVar;\n      if (nav._duckduckgoloader_ && !onlyThisData) data.duck = trueVar;\n\n\n      var image = new Image();\n      image.src =\n        fullApiUrl +\n        \"/simple.gif?\" +\n        Object.keys(data)\n          .filter(function (key) {\n            return data[key] != undefinedVar;\n          })\n          .map(function (key) {\n            return (\n              encodeURIComponentFunc(key) +\n              \"=\" +\n              encodeURIComponentFunc(data[key])\n            );\n          })\n          .join(\"&\") +\n        \"&time=\" +\n        Date.now();\n    };\n\n    // Customers can overwrite their hostname, here we check for that\n    var overwrittenHostname =\n      overwriteOptions.hostname || attr(scriptElement, \"hostname\");\n    var definedHostname = overwrittenHostname || locationHostname;\n\n    var basePayload = {\n      version: version,\n      hostname: definedHostname,\n    };\n\n\n    /////////////////////\n    // INITIALIZE VALUES\n    //\n\n\n\n    /////////////////////\n    // GET SETTINGS\n    //\n\n    // Script mode, this can be hash mode for example\n    var mode = overwriteOptions.mode || attr(scriptElement, \"mode\");\n\n\n\n\n\n\n\n\n\n    // This code could error on (incomplete) implementations, that's why we use try...catch\n    var timezone;\n    try {\n      // c = countries\n      timezone = collectMetricByString(\"c\")\n        ? Intl.DateTimeFormat().resolvedOptions().timeZone\n        : undefinedVar;\n    } catch (error) {\n      warn(error);\n    }\n\n    /////////////////////\n    // PAYLOAD FOR BOTH PAGE VIEWS AND EVENTS\n    //\n\n    // eslint-disable-next-line no-redeclare\n    var bot = isBotAgent;\n\n    // t = timeonpage, scro = scrolled\n    var collectDataOnLeave =\n      collectMetricByString(\"t\") || collectMetricByString(\"scro\");\n\n    if (bot) basePayload.bot = trueVar;\n\n    var payload = assign(basePayload, {\n      // us = useragent\n      ua: collectMetricByString(\"us\") ? userAgent : undefinedVar,\n\n      https: loc.protocol == https,\n      timezone: timezone,\n      page_id: collectDataOnLeave ? uuid() : undefinedVar,\n\n      // se = sessions\n      session_id: collectMetricByString(\"se\") ? uuid() : undefinedVar,\n    });\n\n    payload.sri = trueVar;\n\n    // Use User-Agent Client Hints for better privacy\n    // https://web.dev/user-agent-client-hints/\n    if (uaData) {\n      payload.mobile = uaData.mobile;\n      payload.brands = stringify(uaData.brands);\n    }\n\n    /////////////////////\n    // ADD WARNINGS\n    //\n\n\n\n    // When a customer overwrites the hostname, we need to know what the original\n    // hostname was to hide that domain from referrer traffic\n    if (definedHostname !== locationHostname)\n      payload.hostname_original = locationHostname;\n\n    // Don't track when Do Not Track is set to true\n    if (doNotTrack in nav && nav[doNotTrack] == \"1\")\n      return warn(\n        notSendingWhen + doNotTrack + \" is enabled. See \" + docsUrl + \"/dnt\"\n      );\n\n    // Warn when sending from localhost and not having a hostname set\n    if (\n      (locationHostname.indexOf(\".\") == -1 ||\n        /^[0-9.:]+$/.test(locationHostname)) &&\n      !overwrittenHostname\n    )\n      warn(\n        \"Set hostname on \" +\n          locationHostname +\n          \". See \" +\n          docsUrl +\n          \"/overwrite-domain-name\"\n      );\n\n    /////////////////////\n    // SETUP INITIAL VARIABLES\n    //\n\n    var page = {};\n    var lastSendPath;\n\n    var getReferrer = function () {\n      // Customers can overwrite their referrer, here we check for that\n      var overwrittenReferrer =\n        overwriteOptions.referrer || attr(scriptElement, \"referrer\");\n\n      return (\n        (overwrittenReferrer || doc.referrer || \"\")\n          .replace(locationHostname, definedHostname)\n          .replace(/^https?:\\/\\/((m|l|w{2,3}([0-9]+)?)\\.)?([^?#]+)(.*)$/, \"$4\")\n          .replace(/^([^/]+)$/, \"$1\") || undefinedVar\n      );\n    };\n\n    // We don't want to end up with sensitive data so we clean the referrer URL\n    var referrer = getReferrer();\n\n    /////////////////////\n    // TIME ON PAGE AND SCROLLED LOGIC\n    //\n\n    // We don't put msHidden in if duration block, because it's used outside of that functionality\n    var msHidden = 0;\n\n    var sendOnLeave = function (id, push) {\n      if (!collectDataOnLeave) return;\n\n      var append = assign(basePayload, {\n        type: \"append\",\n        original_id: push ? id : payload.page_id,\n      });\n\n\n\n      if (push || !nav.sendBeacon) {\n        // sendData will assign payload to request\n        sendData(append, undefinedVar, trueVar);\n      } else {\n        try {\n          nav.sendBeacon.bind(nav)(fullApiUrl + \"/append\", stringify(append));\n        } catch (e) {\n          // Fallback for browsers throwing \"Illegal invocation\" when the URL is invalid\n          sendData(append, undefinedVar, trueVar);\n        }\n      }\n    };\n\n\n    addEventListenerFunc(pagehide, sendOnLeave, falseVar);\n\n\n    /////////////////////\n    // ACTUAL PAGE VIEW LOGIC\n    //\n\n    var getPath = function (overwrite) {\n      var path = \"\";\n\n      // decodeURIComponent can fail when having invalid characters\n      // https://github.com/simpleanalytics/roadmap/issues/462\n      try {\n        path = overwrite || decodeURIComponentFunc(loc.pathname);\n      } catch (error) {\n        warn(error);\n      }\n\n\n\n\n      return path;\n    };\n\n    var previousReferrer;\n\n    // Send page view and append data to it\n    var sendPageView = function (\n      isPushState,\n      deleteSourceInfo,\n      sameSite,\n      query,\n      metadata,\n      callback\n    ) {\n      if (isPushState) sendOnLeave(\"\" + payload.page_id, trueVar);\n      if (collectDataOnLeave) payload.page_id = uuid();\n\n      var currentPage = definedHostname + getPath();\n\n      sendData(\n        {\n          id: payload.page_id,\n          type: pageviewText,\n          referrer: !deleteSourceInfo || sameSite ? referrer : null,\n          query: query || getQueryParams(deleteSourceInfo),\n\n        },\n        callback\n      );\n\n      previousReferrer = referrer;\n      referrer = currentPage;\n\n      pages++;\n    };\n\n    var sameSite, userNavigated;\n\n    var pageview = function (\n      isPushState,\n      pathOverwrite,\n      metadata,\n      callbackRaw\n    ) {\n      if (!callbackRaw && isFunction(metadata)) callbackRaw = metadata;\n      var callback = isFunction(callbackRaw) ? callbackRaw : function () {};\n      var querySearch;\n      if (isString(pathOverwrite) && pathOverwrite.indexOf(\"?\") > -1) {\n        // keep query from manual path\n        var parts = pathOverwrite.split(\"?\");\n        pathOverwrite = parts.shift();\n        querySearch = \"?\" + parts.join(\"?\");\n      }\n      // Obfuscate personal data in URL by dropping the search and hash\n      var path = getPath(pathOverwrite);\n\n      // Don't send the last path again (this could happen when pushState is used to change the path hash or search)\n      if (!path || lastSendPath == path) return;\n\n      lastSendPath = path;\n      page.path = path;\n\n\n      // l = language\n      if (collectMetricByString(\"l\")) {\n        if (nav[language]) page[language] = nav[language];\n      }\n\n\n      // If a user does refresh we need to delete the referrer because otherwise it count double\n      var perf = window.performance;\n      var navigationText = \"navigation\";\n\n      // Check if back, forward or reload buttons are being used in modern browsers\n      var performaceEntryType;\n      try {\n        performaceEntryType = perf.getEntriesByType(navigationText)[0].type;\n      } catch (error) {\n        warn(error);\n      }\n\n      userNavigated = performaceEntryType\n        ? [\"reload\", \"back_forward\"].indexOf(performaceEntryType) > -1\n        : // Check if back, forward or reload buttons are being use in older browsers\n          // 1: TYPE_RELOAD, 2: TYPE_BACK_FORWARD\n          perf &&\n          perf[navigationText] &&\n          [1, 2].indexOf(perf[navigationText].type) > -1;\n\n      // Check if referrer is the same as current real hostname (not the defined hostname!)\n      sameSite = referrer\n        ? referrer.split(slash)[0] == locationHostname\n        : falseVar;\n\n\n\n      var triggerSendPageView = function () {\n        fetchedHighEntropyValues = trueVar;\n        var delSrc =\n          isPushState || userNavigated || !collectMetricByString(\"r\");\n        sendPageView(\n          isPushState,\n          delSrc, // r = referrers\n          sameSite,\n          querySearch ? getQueryParams(delSrc, querySearch) : undefinedVar,\n          metadata,\n          callback\n        );\n      };\n\n      if (!fetchedHighEntropyValues) {\n        // Request platform information if this is available\n        try {\n          if (uaData && isFunction(uaData.getHighEntropyValues)) {\n            uaData\n              .getHighEntropyValues([platformText, platformVersionText])\n              .then(function (highEntropyValues) {\n                payload.os_name = highEntropyValues[platformText];\n                payload.os_version = highEntropyValues[platformVersionText];\n                triggerSendPageView();\n              })\n              .catch(triggerSendPageView);\n          } else {\n            triggerSendPageView();\n          }\n        } catch (e) {\n          triggerSendPageView();\n        }\n      } else {\n        triggerSendPageView();\n      }\n    };\n\n\n\n    pageview();\n\n  } catch (e) {\n    warn(e);\n  }\n})(\n  window,\n  {},\n  \"<!--# echo var="http_host" default="" -->\",\n  \"\",\n  \"custom_light_12\",\n  \"sa\"\n);\n"],"names":["window","overwriteOptions","baseUrl","warn","undefinedVar","undefined","https","con","console","doNotTrack","nav","navigator","loc","location","locationHostname","host","doc","document","userAgent","notSending","fetchedHighEntropyValues","encodeURIComponentFunc","encodeURIComponent","decodeURIComponentFunc","decodeURIComponent","stringify","JSON","addEventListenerFunc","addEventListener","fullApiUrl","language","documentElement","uaData","userAgentData","platformText","platformVersionText","docsUrl","isBotAgent","test","scriptElement","currentScript","querySelector","args","slice","call","arguments","unshift","Function","prototype","apply","isString","string","attr","attribute","getAttribute","assign","obj","prop","object","to","arg","index","length","nextSource","constructor","Object","nextKey","hasOwnProperty","settings","sa_settings","logSettings","keys","Date","now","uuid","cryptoObject","crypto","msCrypto","emptyUUID","uuidRegex","replace","c","getRandomValues","Uint8Array","toString","error","r","Math","random","isFunction","func","namespaceText","namespace","strictUtm","getQueryParams","ignoreSource","overwriteSearch","search","split","filter","keyValue","RegExp","join","loadedVariable","sa_event_loaded","timezone","sendData","data","callback","onlyThisData","payload","page","brave","_duckduckgoloader_","duck","Image","src","key","map","overwrittenHostname","hostname","definedHostname","basePayload","version","mode","Intl","DateTimeFormat","resolvedOptions","timeZone","bot","ua","protocol","page_id","session_id","sri","mobile","brands","hostname_original","indexOf","lastSendPath","referrer","sendOnLeave","id","push","append","type","original_id","sendBeacon","bind","e","sameSite","userNavigated","getPath","overwrite","path","pathname","isPushState","pathOverwrite","metadata","callbackRaw","querySearch","parts","shift","performaceEntryType","perf","performance","navigationText","getEntriesByType","triggerSendPageView","delSrc","deleteSourceInfo","query","currentPage","pages","sendPageView","getHighEntropyValues","then","highEntropyValues","os_name","os_version","catch","pageview"],"mappings":"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"}